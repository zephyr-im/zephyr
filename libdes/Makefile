# Makefile generated by imake - do not edit!
# $XConsortium: imake.c,v 1.86 93/10/11 12:12:36 rws Exp $

all::

SHELL=/bin/sh
MAKESHELL=/bin/sh

TOP = ../.
CWD = ./libdes
CONFIGSRC = /mit/opssrc/zephyr.sunos/production/config
DESTDIR=

IRULESRC = $(CONFIGSRC)

PTOP = $(TOP)/.

IMAKE= imake
IFLAGS= -I$(IRULESRC) $(IFLAGS_SH) $(OTHER_IFLAGS) -DTOPDIR=/mit/opssrc/zephyr.sunos/production
XIFLAGS= -I$(ATHXLIBDIR)/X11/config -DUseInstalled

ICONFIGFILES = $(IRULESRC)/Imake.tmpl $(IRULESRC)/Imake.rules \
	$(IRULESRC)/site.def Imakefile $(PRULEDEP)
MKDIRHIER= sh $(IRULESRC)/mkdirhier.sh

ATHVERS = $(IRULESRC)/update.conf

ATHBASEDIR=/usr/athena

ATHLIBDIR=$(ATHBASEDIR)/lib
ATHBINDIR=$(ATHBASEDIR)/bin
ATHINCDIR=$(ATHBASEDIR)/include
ATHETCDIR=$(ATHBASEDIR)/etc
ATHCONFDIR=/etc/athena
ATHMANDIR=$(ATHBASEDIR)/man
ATHRBINDIR=/bin/athena
ATHRETCDIR=/etc/athena

ATHNEWDIR=$(ATHBINDIR)

ATHXAPPDIR=/usr/athena/lib/X11/app-defaults
ATHXBITDIR=/usr/athena/lib/X11/bitmaps
ATHXINCDIR=/usr/athena/include
ATHXLIBDIR=/usr/athena/lib

AFSDIR=/mit/afsuser/@sys

LINTCFLAG=-o
LINTFLAGS=-DPOSIX $(DEFINES) -I/usr/athena/include

INSTALL=install -c
RANLIB=ranlib
CC=cc
LD=cc
AS=as
RM=rm -f
CP=cp -p

ETCMD=compile_et
SSCMD=mk_cmds

LIB_ET = -lcom_err
LIB_SS = -lss
LIB_HES = -lhesiod
LIB_KRB = -lkrb -ldes
LIB_ZEPHYR = -lzephyr -lkrb -ldes -lcom_err
LIB_X = -lX11 -lXext
LIB_XT = -lXt -lX11 -lXext
LIB_XAW = -lXaw -lXmu -lXt -lX11 -lXext

CDEBUG=-O2

CFLAGS=$(CDEBUG) -DPOSIX $(DEFINES) -I/usr/athena/include
LDFLAGS= $(LDDEFS)
LDPATH=-L$(ATHLIBDIR)
LDLIBS=

install:: install_dirs
install_dirs::
install::
install.man::

clean::
depend::

FRC::

###########################################################################
# start of Imakefile
###########################################################################

#	Copyright 1993 Massachusetts Institute of Technology
#	For copying and distribution information, see the file
#	"mit-copyright.h"
#
#	$Id$

CDEFS_KRB = -DKERBEROS
ZLIB_KRB = $(LIB_KRB)

CDEFS_HES = -DHESIOD
ZLIB_HES = $(LIB_HES)

ZPIDDIR = /etc/athena
ZETCDIR = $(ATHCONFDIR)/zephyr
ZLIBDIR = $(ATHLIBDIR)/zephyr
ZINCDIR = $(ATHINCDIR)/zephyr
ZACLDIR = $(ZETCDIR)/acl

BINC = $(PTOP)/h

ZLIB = $(PTOP)/lib/libzephyr.a
ZLIBDES = $(PTOP)/libdes/libdes.a
ZLIBS = $(ZLIB_KRB) $(LIB_ET) $(ZLIB_HES)
DYN_LIB = $(PTOP)/libdyn/libdyn.a

DEFINES = $(XDEFS) -I$(BINC) \
	$(CDEFS_KRB) $(CDEFS_HES) $(CDEFS_ET) $(CDEFS_SS) \
	$(MACHDEFS)

CC=cc
LD=cc

ATHBINDIR = /mit/zephyr/@sys/bin
ATHLIBDIR = /mit/zephyr/@sys/lib
ATHINCDIR = /mit/zephyr/include
ATHMANDIR = /mit/zephyr/man

ZLIBDIR = /mit/zephyr/configs
ATHCONFDIR = $(ZLIBDIR)
ATHETCDIR = $(ATHBINDIR)
ATHRETCDIR = $(ATHBINDIR)

LDPATH = -L/usr/athena/lib/shared -L/usr/athena/lib

# $Id$
#
# Copyright 1987, 1993 by the Massachusetts Institute of Technology.
#
# For copying and distribution information,
# please see the file <mit-copyright.h>.
#
# Imakefile for DES library
#

all:: $(BINC)/des.h

$(BINC)/des.h: des.h
	$(RM) $@; $(CP) des.h $@

OTHEROBJS= f_cbc.o f_cksum.o f_pcbc.o f_sched.o f_ecb.o f_parity.o f_tables.o

DESOBJS= $(OTHEROBJS) key_sched.o debug_decl.o \
	quad_cksum.o random_key.o read_password.o \
	string_to_key.o weak_key.o new_rnd_key.o util.o $(OLDOBJS)

all::	 libdes.a
 libdes.a::	$(DESOBJS)
	ar cru  libdes.a $(DESOBJS)
	$(RANLIB)  libdes.a
all-prof::  libdes_p.a
 libdes_p.a:	$(DESOBJS)
	cd profiled; ar cru  ../libdes_p.a $(DESOBJS)
	$(RANLIB)  libdes_p.a

install::
	$(RM)  $(DESTDIR)$(ATHLIBDIR)/libdes.a
	$(INSTALL) -m 0644  libdes.a $(DESTDIR)$(ATHLIBDIR)
	$(RANLIB)  $(DESTDIR)$(ATHLIBDIR)/libdes.a
inst-prof::
	$(RM)  $(DESTDIR)$(ATHLIBDIR)/libdes_p.a
	$(INSTALL) -m 0644  libdes_p.a $(DESTDIR)$(ATHLIBDIR)
	$(RANLIB)  $(DESTDIR)$(ATHLIBDIR)/libdes_p.a

all::	enc
enc::	enc.o libdes.a
	$(LD)  $(LDFLAGS) -o enc enc.o libdes.a $(LDPATH)  $(LDLIBS)
clean::
	$(RM) enc

all::	destest
destest::	destest.o libdes.a
	$(LD)  $(LDFLAGS) -o destest destest.o libdes.a $(LDPATH)  $(LDLIBS)
clean::
	$(RM) destest

all::	verify
verify::	verify.o libdes.a
	$(LD)  $(LDFLAGS) -o verify verify.o libdes.a $(LDPATH)  $(LDLIBS)
clean::
	$(RM) verify

PRULES = "config/zephyr.rules"
PINC = -DProjectRules=\"$(PRULES)\" -DProjectRuleDep=$(PRULES)

PRULEDEP = $(PTOP)/config/zephyr.rules

PTOP = $(TOP)/.
IPROJ = -DProject -DProjectTop=. -I$(PTOP) $(PINC)

IFLAGS_SH = -DUseSharedLibs

Makefile:: $(ICONFIGFILES)
	-@if [ -f Makefile ]; then \
        	echo "  $(RM) Makefile.bak; mv Makefile Makefile.bak"; \
		$(RM) Makefile.bak; mv Makefile Makefile.bak; \
        else exit 0; fi
	$(IMAKE) $(IPROJ) $(IFLAGS) -DNEWTOP=$(TOP) -DNEWCWD=$(CWD)

XMakefile::
	-@if [ -f Makefile ]; then \
        	echo "  $(RM) Makefile.bak; mv Makefile Makefile.bak"; \
		$(RM) Makefile.bak; mv Makefile Makefile.bak; \
        else exit 0; fi
	$(IMAKE) $(XIFLAGS)

clean::
	$(RM) *~ *.o *.a core a.out Makefile.bak
	$(RM) -r profiled

all-prof inst-prof::

Makefiles::

###########################################################################
# dependencies generated by makedepend

