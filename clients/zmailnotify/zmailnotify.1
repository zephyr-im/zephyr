.\"	$Source$
.\"	$Author$
.\"	$Header$
.\"
.\" Copyright 1988 by the Massachusetts Institute of Technology
.\" All rights reserved.  The file /usr/include/zephyr/mit-copyright.h
.\" specifies the terms and conditions for redistribution.
.\"
.TH ZMAILNOTIFY 1 "July 8, 1988" "MIT Project Athena"
.ds ]W MIT Project Athena
.SH NAME
zmailnotify \- retrieve mail headers from post office and transmit via Zephyr
.SH SYNOPSIS
.B zmailnotify
.SH DESCRIPTION
.I zmailnotify
connects to the invoking user's POP post office and retrieves the From,
To, and Subject fields of waiting messages, and then sends one Zephyr
notice per message to class MAIL, instance POPRET, recipient 
.I <user@realm>,
where <user@realm> is the invoking user's username concatenated with the
local Zephyr realm (e.g. jruser@ATHENA.MIT.EDU).
.PP
.I zmailnotify
is intended to be executed by
.I zwgc(1)
when notifications of spooled mail (such
as those generated by \fIzpopnotify(8)\fR) are delivered.
By default, these notifications are not delivered, nor are they acted
upon.  To receive the notices, you must subscribe to class MAIL,
instance POP, recipient username@realm  (see \fIzctl\fR(1)).
Once you subscribe to these notices, by default they will be simply
displayed on your display or terminal by
.I zwgc(1).
To have 
.I zmailnotify
executed when they are delivered, you must copy the system default
windowgram description file (\fI/etc/athena/zephyr.desc\fR) to your home
directory as filename 
.I ~/.zephyr.desc
and follow the directions contained in that file pertaining to
.B MAIL NOTIFICATION.
.PP
.I zmailnotify
only retrieves four headers at one time in order to reduce the
competition for the mailbox lock on the post office.  If more than four mail
messages are waiting,
.I zmailnotify 
should be run multiple times.  If executed from a
.I zwgc(1)
description file, this will happen automatically.
.PP
To check for mail already waiting when you log in, use the standard MH
program
.I msgchk(1).
.SH BUGS
.I zmailnotify
only sends notification of mail which appears to be unique.
Uniqueness is determined by comparing the To:, From:, and Subject:
fields of the message with the last checked mail message; if the
three fields match exactly, the new message is
not considered unique.  The To:, From:, and Subject: fields of the last
message are stored in the file 
.IR $HOME/.maillock .
.SH FILES
$HOME/.maillock
.SH SEE ALSO
msgchk(1), zctl(1), zephyr(1), zwgc(1), zhm(8), zephyrd(8),
zpopnotify(8), popd(8)
.br
Project Athena Technical Plan Section E.4.1, `Zephyr Notification
Service'
.SH AUTHOR
.PP
Robert S. French (MIT-Project Athena)
.SH RESTRICTIONS
Copyright (c) 1987,1988 by the Massachusetts Institute of Technology.
All Rights Reserved.
.br
.I zephyr(1)
specifies the terms and conditions for redistribution.
