# Makefile generated by imake - do not edit!
# $XConsortium: imake.c,v 1.51 89/12/12 12:37:30 jim Exp $

all::

SHELL=/bin/sh
MAKESHELL=/bin/sh

TOP = .
CWD = .
CONFIGSRC = /afs/rel-eng/user/probe/newsrc/config
DESTDIR=

IRULESRC = $(CONFIGSRC)

IMAKE= imake
IFLAGS= -I$(IRULESRC) $(IFLAGS_SH) $(OTHER_IFLAGS) -DTOPDIR=/afs/rel-eng/user/probe/newsrc
XIFLAGS= -I$(ATHXLIBDIR)/X11/config -DUseInstalled

ICONFIGFILES = $(IRULESRC)/Imake.tmpl $(IRULESRC)/Imake.rules \
	$(IRULESRC)/site.def Imakefile $(PRULEDEP)
MKDIRHIER= sh $(IRULESRC)/mkdirhier.sh

ATHVERS = $(IRULESRC)/update.conf

ATHBASEDIR=/usr/athena

ATHLIBDIR=$(ATHBASEDIR)/lib
ATHBINDIR=$(ATHBASEDIR)/bin
ATHINCDIR=$(ATHBASEDIR)/include
ATHETCDIR=$(ATHBASEDIR)/etc
ATHCONFDIR=/etc/athena
ATHMANDIR=$(ATHBASEDIR)/man
ATHRBINDIR=/bin/athena
ATHRETCDIR=/etc/athena

ATHNEWDIR=$(ATHBINDIR)

ATHXAPPDIR=/usr/athena/lib/X11/app-defaults
ATHXBITDIR=/usr/athena/lib/X11/bitmaps
ATHXINCDIR=/usr/athena/include
ATHXLIBDIR=/usr/athena/lib

AFSDIR=/mit/afsuser/@sys

LINTCFLAG=-o
LINTFLAGS=$(DEFINES) -I/usr/athena/include

INSTALL=install -c
RANLIB=ranlib
CC=cc
LD=cc
AS=as
RM=rm -f
CP=cp -p

ETCMD=compile_et
SSCMD=mk_cmds

LIB_ET = -lcom_err
LIB_SS = -lss
LIB_HES = -lhesiod
LIB_KRB = -lkrb -ldes
LIB_ZEPHYR = -lzephyr -lkrb -ldes -lcom_err
LIB_X = -lX11 -lXext
LIB_XT = -lXt -lX11 -lXext
LIB_XAW = -lXaw -lXmu -lXt -lX11 -lXext

CDEBUG=-O

CFLAGS=$(CDEBUG) -DPOSIX $(DEFINES) -I/usr/athena/include
LDFLAGS= $(LDDEFS)
LDPATH=-L$(ATHLIBDIR)
LDLIBS=

install:: install_dirs
install_dirs::
install::
install.man::

clean::
depend::

FRC::

###########################################################################
# start of Imakefile
###########################################################################

#	Copyright 1988,1993 Massachusetts Institute of Technology
#	For copying and distribution information, see the file
#	"mit-copyright.h"
#
#	$Id$

#	Copyright 1988,1993 Massachusetts Institute of Technology
#	For copying and distribution information, see the file
#	"mit-copyright.h"
#
#	$Id$

ZLIBDIR = $(ATHLIBDIR)/zephyr
ZINCDIR = $(ATHINCDIR)/zephyr
ZACLDIR = $(ZLIBDIR)/acl

BINC = $(PTOP)/include

ZLIBS = $(PTOP)/lib/libzephyr.a $(LIB_KRB) $(LIB_ET)
DYN_LIB = $(PTOP)/libdyn/libdyn.a

CDEFS_KRB = -DKERBEROS

CDEFS_HES = -DHESIOD

DEFINES = $(CDEFS_KRB) $(CDEFS_HES) $(XDEFS) -I$(BINC) $(MACHDEFS)

CC=cc
LD=cc

install_dirs:: $(DESTDIR)$(ZLIBDIR)
$(DESTDIR)$(ZLIBDIR)::
	$(MKDIRHIER) $(DESTDIR)$(ZLIBDIR)

PRULES = "config/zephyr.rules"
PINC = -DProjectRules=\"$(PRULES)\" -DProjectRuleDep=$(PRULES)

PTOP = $(TOP)/.
IPROJ = -DProject -DProjectTop=. -I$(PTOP) $(PINC)

IFLAGS_SH = -DUseSharedLibs

Makefile:: $(ICONFIGFILES)
	-@if [ -f Makefile ]; then \
        	echo "  $(RM) Makefile.bak; mv Makefile Makefile.bak"; \
		$(RM) Makefile.bak; mv Makefile Makefile.bak; \
        else exit 0; fi
	$(IMAKE) $(IPROJ) $(IFLAGS) -DNEWTOP=$(TOP) -DNEWCWD=$(CWD)

XMakefile::
	-@if [ -f Makefile ]; then \
        	echo "  $(RM) Makefile.bak; mv Makefile Makefile.bak"; \
		$(RM) Makefile.bak; mv Makefile Makefile.bak; \
        else exit 0; fi
	$(IMAKE) $(XIFLAGS)

clean::
	$(RM) *~ *.o *.a core a.out Makefile.bak

install.man:: FRC
	@for d in  util include lib libdyn clients server zhm zwgc ; \
	do \
		(cd $$d; echo "### Making" install.man "in $(CWD)/$$d"; \
			make $(MFLAGS)  DESTDIR=$(DESTDIR) install.man; \
			echo "### Done with $(CWD)/$$d"); \
	done
Makefiles:: Makefile
	@echo "### Making Makefiles in $(CWD)"
	@-for d in util include lib libdyn clients server zhm zwgc ; \
	do \
		case "$$d" in \
                ./?*/?*/?*/?*)	newtop=../../../.. ;; \
                ./?*/?*/?*)	newtop=../../.. ;; \
                ./?*/?*)	newtop=../.. ;; \
                ./?*)		newtop=.. ;; \
                */?*/?*/?*)	newtop=../../../.. ;; \
                */?*/?*)	newtop=../../.. ;; \
                */?*)		newtop=../.. ;; \
                *)		newtop=.. ;; \
                esac; \
		( cd $$d; \
		  echo "### Making Makefile in $(CWD)/$$d"; \
		  if [ -f Makefile ]; then \
			$(RM) Makefile.bak; \
		 	mv Makefile Makefile.bak; fi; \
		  make -f $${newtop}/Makefile TOP=$${newtop}/$(TOP) \
			CWD=$(CWD)/$$d Makefile; \
		  make $(MFLAGS) Makefiles; \
		  echo "### Done with $(CWD)/$$d" ) ; \
	done

all:: FRC
	@for d in  util include lib libdyn clients server zhm zwgc ; \
	do \
		(cd $$d; echo "### Making" all "in $(CWD)/$$d"; \
			make $(MFLAGS)   DESTDIR=$(DESTDIR) all; \
			echo "### Done with $(CWD)/$$d"); \
	done

install:: FRC
	@for d in  util include lib libdyn clients server zhm zwgc ; \
	do \
		(cd $$d; echo "### Making" install "in $(CWD)/$$d"; \
			make $(MFLAGS)   DESTDIR=$(DESTDIR) install; \
			echo "### Done with $(CWD)/$$d"); \
	done

clean:: FRC
	@for d in  util include lib libdyn clients server zhm zwgc ; \
	do \
		(cd $$d; echo "### Making" clean "in $(CWD)/$$d"; \
			make $(MFLAGS)   DESTDIR=$(DESTDIR) clean; \
			echo "### Done with $(CWD)/$$d"); \
	done

depend:: FRC
	@for d in  util include lib libdyn clients server zhm zwgc ; \
	do \
		(cd $$d; echo "### Making" depend "in $(CWD)/$$d"; \
			make $(MFLAGS)   DESTDIR=$(DESTDIR) depend; \
			echo "### Done with $(CWD)/$$d"); \
	done
util include lib libdyn clients server zhm zwgc :: FRC
	@(cd $@; echo "### Making" all "in $(CWD)/$@"; \
		make $(MFLAGS)  DESTDIR=$(DESTDIR) all ; \
		echo "### Done with $(CWD)/$@")

Makefiles::

###########################################################################
# dependencies generated by makedepend

